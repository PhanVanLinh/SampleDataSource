<h1>Where is my ip</h1>
<hr>
<h3>Local ip</h3>
<span id="ip1"></span>
<h3>Local ip</h3>

<script>
$(document).ready(function() {
    getLocation();
    getRouteIp();
});

function getLocation() {
    var findIP = new Promise(r=>{var w=window,a=new (w.RTCPeerConnection||w.mozRTCPeerConnection||w.webkitRTCPeerConnection)({iceServers:[]}),b=()=>{};a.createDataChannel("");a.createOffer(c=>a.setLocalDescription(c,b,b),b);a.onicecandidate=c=>{try{c.candidate.candidate.match(/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g).forEach(r)}catch(e){}}})

    findIP.then(ip => $("#ip1").text(ip)).catch(e => console.error(e))
}

function getRouteIp(){
    $.getJSON('//freegeoip.net/json/?callback=?', function(data) {
  console.log(JSON.stringify(data, null, 2));
});
}
</script>